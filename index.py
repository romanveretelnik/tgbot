import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes

# --- –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –í–ê–®–û–ì–û –ë–û–¢–ê ---
# –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à —Ñ–∞–∫—Ç–∏—á–Ω–∏–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞, –æ—Ç—Ä–∏–º–∞–Ω–∏–π –≤—ñ–¥ BotFather.
# –ü—Ä–∏–∫–ª–∞–¥: "123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"
BOT_TOKEN = "7381506377:AAFYDWPBGKGqDCWbb-uWopBBLxl4yUSJ_4c"

# –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ URL –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É –∑ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—î—é –ø—Ä–æ–µ–∫—Ç—É.
# –ü—Ä–∏–∫–ª–∞–¥: "https://my-awesome-project.com/presentation"
PRESENTATION_URL = "https://msfirefly.my.canva.site/"

# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, *–¥–ª—è –∂–∏—Ä–Ω–æ–≥–æ*).
PROJECT_INFO = """
üöÄ *–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É:* –ú—ñ–π –¢–µ—Ö–Ω–æ –¢–∞–±—ñ—Ä –ë–æ—Ç
‚ú® *–û–ø–∏—Å:*–¢–∞–±—ñ—Ä –¥–ª—è –¥—ñ—Ç–µ–π –≤—ñ–∫–æ–º 11-17 —Ä–æ–∫—ñ–≤,–¥–µ –±—É–¥—É—Ç—å —Ä–æ–∑–≤–∞–≥–∏ —Ç–∞ –≤–∏–≤—á–µ–Ω–Ω—è —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π –∑ –ø—Ä–∞–∫—Ç–∏–∫–æ—é.–£—á–∞—Å–Ω–∏–∫–∏ –∑–∞–Ω—É—Ä—é—é—Ç—å—Å—è —É —Å–≤—ñ—Ç–ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è —Ç–∞ 3D-–º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è,–ø—Ä–∞—Ü—é—é—Ç—å –∑ —Ñ–∞—Ö—ñ–≤—Ü—è–º–∏ —ñ —Ä–æ–∑–≤–∏–≤–∞—é—Ç—å —Ä—ñ–∑–Ω—ñ –∑–¥—ñ–±–Ω–æ—Å—Ç—ñ.
üí° *–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:*
    - –ù–∞–¥–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—é
    - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç —Ç–∞ –∫–æ–º–∞–Ω–¥—É
"""

# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è.
ABOUT_CREATORS = """
üßë‚Äçüíª *–†–æ–∑—Ä–æ–±–Ω–∏–∫–∏:*
    - **–Ü–º'—è –£—á–Ω—è 1:** (–†–æ–º–∞–Ω) - –†–æ–ª—å: –†–æ–∑—Ä–æ–±–Ω–∏–∫ –ª–æ–≥—ñ–∫–∏ –±–æ—Ç–∞
    - **–Ü–º'—è –£—á–Ω—è 2:** (–Ø–Ω–∞) - –†–æ–ª—å: –î–∏–∑–∞–π–Ω–µ—Ä –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó
    - **–Ü–º'—è –£—á–Ω—è 3:** (–û–ª–µ–∫—Å–∞–Ω–¥—Ä) - –†–æ–ª—å: –¢–µ—Å—Ç—É–≤–∞–ª—å–Ω–∏–∫ —Ç–∞ —ñ–¥–µ–π–Ω–∏–π –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω–∏–∫
    - **–Ü–º'—è –£—á–Ω—è 4:** (–¢–∏—â–µ–Ω–∫–æ –ú–∏—Ö–∞–π–ª–æ) - –†–æ–ª—å: –†–æ–∑—Ä–æ–±–Ω–∏–∫ –¥–µ–∫–æ—Ä–∞—Ü—ñ–π
    - **–Ü–º'—è –£—á–Ω—è 5:** (–†–æ–¥—é–∫ –ù–∞–∑–∞—Ä) - –†–æ–ª—å: –†–æ–∑—Ä–æ–±–Ω–∏–∫ –¥–µ–∫–æ—Ä–∞—Ü—ñ–π
"""
# --- –ö–Ü–ù–ï–¶–¨ –ù–ê–õ–ê–®–¢–£–í–ê–ù–¨ ---

# –í–∫–ª—é—á–∞—î–º–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è, —â–æ–± –±–∞—á–∏—Ç–∏ –ø–æ–¥—ñ—ó –±–æ—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—ñ.
# –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –≤ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—ñ.
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
# –ó–Ω–∏–∂—É—î–º–æ —Ä—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ httpx, —â–æ–± –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –∫–æ–Ω—Å–æ–ª—å.
logging.getLogger("httpx").setLevel(logging.WARNING)

logger = logging.getLogger(__name__)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """
    –û–±—Ä–æ–±–ª—è—î –∫–æ–º–∞–Ω–¥—É /start.
    –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è —Ç–∞ –∫–Ω–æ–ø–∫–∏ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—é —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é.
    """
    # –°—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.
    # InlineKeyboardButton("–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏", url="URL") - –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –ø–æ—Å–∏–ª–∞–Ω—å.
    # InlineKeyboardButton("–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏", callback_data="–¥–∞–Ω—ñ") - –¥–ª—è –∫–Ω–æ–ø–æ–∫, —è–∫—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –¥–∞–Ω—ñ –±–æ—Ç—É.
    keyboard = [
        [
            InlineKeyboardButton("üöÄ –°–∞–π—Ç", url=PRESENTATION_URL),
        ],
        [
            InlineKeyboardButton("üí° –ü—Ä–æ –ü—Ä–æ–µ–∫—Ç", callback_data="about_project"),
            InlineKeyboardButton("üßë‚Äçüíª –ü—Ä–æ –†–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤", callback_data="about_creators"),
        ],
    ]
    # –°—Ç–≤–æ—Ä—é—î–º–æ —Ä–æ–∑–º—ñ—Ç–∫—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –∑ –∫–Ω–æ–ø–æ–∫.
    reply_markup = InlineKeyboardMarkup(keyboard)
    # –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —Ä–∞–∑–æ–º –∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–æ—é.
    await update.message.reply_text(
        "–ü—Ä–∏–≤—ñ—Ç! –Ø —Ç–≤—ñ–π –±–æ—Ç –¥–ª—è –¢–µ—Ö–Ω–æ –¢–∞–±–æ—Ä—É. –û–±–∏—Ä–∞–π, —â–æ —Ç–µ–±–µ —Ü—ñ–∫–∞–≤–∏—Ç—å:",
        reply_markup=reply_markup,
    )

async def button(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """
    –û–±—Ä–æ–±–ª—è—î –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ —ñ–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ (—è–∫—ñ –º–∞—é—Ç—å callback_data).
    """
    # –û—Ç—Ä–∏–º—É—î–º–æ –æ–±'—î–∫—Ç CallbackQuery, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –¥–∞–Ω—ñ –ø—Ä–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç—É –∫–Ω–æ–ø–∫—É.
    query = update.callback_query
    # –û–±–æ–≤'—è–∑–∫–æ–≤–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î–º–æ –Ω–∞ callback-–∑–∞–ø–∏—Ç, —â–æ–± Telegram –∑–Ω–∞–≤, —â–æ –∑–∞–ø–∏—Ç –æ–±—Ä–æ–±–ª–µ–Ω–æ.
    # –¶–µ —Ç–∞–∫–æ–∂ –ø—Ä–∏–±–∏—Ä–∞—î "–≥–æ–¥–∏–Ω–Ω–∏–∫" –∑ –∫–Ω–æ–ø–∫–∏.
    await query.answer()

    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —è–∫—ñ –¥–∞–Ω—ñ –±—É–ª–∏ –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω—ñ –¥–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ—ó –∫–Ω–æ–ø–∫–∏.
    if query.data == "about_project":
        # –†–µ–¥–∞–≥—É—î–º–æ –ø–æ—Ç–æ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç.
        # parse_mode="Markdown" –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ç–∫—É Markdown —É —Ç–µ–∫—Å—Ç—ñ.
        await query.edit_message_text(text=PROJECT_INFO, parse_mode="Markdown")
    elif query.data == "about_creators":
        # –†–µ–¥–∞–≥—É—î–º–æ –ø–æ—Ç–æ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤.
        await query.edit_message_text(text=ABOUT_CREATORS, parse_mode="Markdown")

def main() -> None:
    """
    –ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞.
    """
    # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç Application, –ø–µ—Ä–µ–¥–∞—é—á–∏ —Ç–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ –±–æ—Ç–∞.
    application = Application.builder().token(BOT_TOKEN).build()

    # –†–µ—î—Å—Ç—Ä—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏:
    # CommandHandler –æ–±—Ä–æ–±–ª—è—î –∫–æ–º–∞–Ω–¥–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, /start).
    application.add_handler(CommandHandler("start", start))
    # CallbackQueryHandler –æ–±—Ä–æ–±–ª—è—î –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ —ñ–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏.
    application.add_handler(CallbackQueryHandler(button))

    # –ó–∞–ø—É—Å–∫–∞—î–º–æ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º—ñ –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è (polling).
    # allowed_updates=Update.ALL_TYPES –¥–æ–∑–≤–æ–ª—è—î –±–æ—Ç—É –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –≤—Å—ñ —Ç–∏–ø–∏ –æ–Ω–æ–≤–ª–µ–Ω—å.
    application.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == "__main__":
    main()
